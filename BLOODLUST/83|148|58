GRAB 300

COPY F X
REPL STH_0
COPY F T
REPL STH_2
COPY F T
REPL STH_3
COPY F T
REPL STH_0_1
COPY F T
COPY -27 X
REPL STH_0


MARK GRAB_200
GRAB 200
SEEK 1
TEST F = X
SEEK 9999
ADDI T 15 F ;
SEEK -3
COPY F X
REPL S2
REPL S1
COPY 4 T

MARK SEND_LOOP
SEEK -4
SUBI T 1 T
COPY F X
REPL S2
REPL S1
TJMP SEND_LOOP


SEEK 9999
SEEK -1
COPY F T
SEEK -1
VOID F
ADDI T M T
TJMP RECV
VOID M

REPL IS_RIGHT_HOST
COPY M X

SEEK M

COPY F T
SEEK 9999
SEEK X
SUBI M X X
MODE
COPY M F
SEEK X
COPY T F
KILL
KILL
MARK VOID_2_M
KILL
KILL
HALT

MARK STH_0_1
COPY -14 X
JUMP STH_0


MARK STH_2
COPY -11 X
JUMP STH_0

MARK STH_3
COPY -12 X
MARK STH_0
LINK 800
REPL 23
REPL 01

REPL 4
LINK 804
JUMP OUT

MARK 01
REPL 0
LINK 801
JUMP OUT




MARK IS_RIGHT_HOST
HOST T
MODE
TEST M = T
FJMP VOID_2_M

MARK 2
LINK 802
JUMP OUT

MARK RECV
SEEK M
COPY F X
COPY M T
MODE
REPL S2
SEEK 999
COPY X M
COPY X M
SEEK T
COPY F M
JUMP VOID_2_M


MARK 4
LINK 805
MARK OUT
TJMP SKIP
REPL GRAB_200
COPY X T
COPY 0 X
MARK SKIP
MAKE
COPY T F
COPY -1030 F
COPY -1000 F
SEEK -3
MARK LOOP
TEST M = F
SEEK T
ADDI X F X
TEST X < -3999
SEEK -2
FJMP LOOP


TEST F = M
SEEK T
ADDI X F X
MODE
MARK W_MRD
TEST MRD
TJMP W_MRD
MODE
SWIZ X 1 T
WIPE
FJMP IS_0
MARK W
ADDI T 1 T 
TJMP W
MARK IS_0
SWIZ X 32 M

MARK 23
REPL 2
LINK 803
JUMP OUT


MARK 0
LINK 800
JUMP OUT

MARK S2
COPY X M
MARK S1
COPY X M
COPY X M

============
GLOBAL
COPY 0 M

============
GLOBAL
COPY 24 T
MARK W
SUBI T 1 T
TJMP W
KILL

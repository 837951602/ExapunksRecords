LOCAL

LINK 800

GRAB 200
SEEK 1
COPY M X
TEST F = X
TJMP DEST

MARK FL
SEEK 4
TEST F = X
FJMP FL


MARK DEST
SEEK 1
TEST F = M
FJMP P
MARK DEST_IN
COPY F X
COPY M T
REPL TONEXT
SEEK -5
MODE
COPY F M
SEEK -1
KILL
REPL SENDT1_MODE
VOID F
VOID F
VOID F
VOID F
VOID F
MODE
;NOTE SEEK LESS :D
SEEK 2
TEST F > X
TJMP FOUND
SEEK 5
JUMP FOUND

MARK TONEXT
REPL 801
REPL 802
REPL 800


LINK 803
@REP 2
JUMP GO
MARK @{800,1}
LINK @{800,1}
@END




MARK GO
REPL SENDT1
GRAB 200
SEEK 22
TEST F > X
FJMP S
SEEK -11
TEST F > X
TJMP FOUND
SEEK 4
TEST F > X
TJMP FOUND
SEEK 3
COPY M X
TEST F = X
FJMP S2
JUMP F2


MARK 802
LINK 802
REPL SENDT1
GRAB 200
SEEK 22
TEST F > X
FJMP S
SEEK -11
TEST F > X
TJMP FOUND
SEEK 4
TEST F > X
TJMP FOUND
SEEK 3
COPY M X
TEST F = X
FJMP S2
JUMP F2


MARK S
SEEK 4
MARK IN
TEST F > X
FJMP S

MARK FOUND
COPY M X
SEEK -2
MARK FOUND_IN
TEST F = X
TJMP F2

MARK S2
SEEK 4
TEST F = X
FJMP S2

MARK F2
KILL
REPL SENDTFROMM
JUMP DEST

MARK P
SEEK 2
TEST F = X
FJMP FL
SEEK 1
TEST F = M
TJMP DEST_IN
JUMP P

MARK SENDTFROMM
MODE
COPY M T
MODE
MARK SENDT
COPY T M
JUMP SENDT

MARK SENDT1_MODE
MODE
MARK SENDT1
REPL W
COPY T M
HALT

MARK W
MODE
MARK ISRIGHT
TEST MRD
TJMP ISRIGHT
KILL
KILL

============
LOCAL

GRAB 300
LINK 800
COPY F M
COPY F T
REPL SENDT
LINK -1
MODE
MARK L
COPY M X
REPL 301
COPY F M
JUMP L 

MARK SENDT
COPY T M
JUMP SENDT

MARK 301
GRAB 301
SEEK 999
COPY X F

GLOBAL
GRAB 300
LINK 800
COPY 8 #AUTH
COPY 0 #AUTH
COPY 3 #AUTH
COPY 2 #AUTH
COPY 7 #AUTH
COPY 1 #AUTH
COPY 0 #AUTH
COPY 4 #AUTH
COPY 9 #AUTH
COPY 5 #AUTH
COPY 1 #AUTH
COPY 2 #AUTH
COPY 5 #AUTH
COPY 2 #AUTH
COPY 6 #AUTH
COPY #TRAK X
REPL LEFT
REPL RIGHT

COPY #TRAK X
ADDI T 1 T
NOOP

MARK LOOP
ADDI 9 T T
MARK WAIT
SUBI T 1 T
TJMP WAIT
COPY X M
SEEK -1
TEST MRD
TJMP LOOP

COPY #TRAK X
COPY F M
JUMP LOOP


MARK LEFT
LINK 801
JUMP GRAB


MARK NEXT_GRAB
COPY 10 T
NOOP
MARK WAIT_GRAB
SUBI T 1 T
TJMP WAIT_GRAB
COPY M X
NOOP
TEST MRD
TJMP NEXT_GRAB

MARK GRAB
GRAB X
REPL NEXT_GRAB
COPY F M
MARK SEND
@REP 12
COPY F M
@END
JUMP SEND


MARK RIGHT
LINK 800

MARK RECV_START
COPY 31 X
MAKE
MARK RECV
@REP 11
COPY M F
@END
SUBI X 10 X
COPY M F
TEST MRD
TJMP RECV

REPL RECV_START
COPY X T
COPY M X
MARK RECV_WAIT
SUBI T 1 T
TJMP RECV_WAIT
SEEK -999
MARK CHECK
TEST F > 0
TJMP CHECK
SEEK -1
COPY X F
JUMP CHECK
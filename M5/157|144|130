GLOBAL

LINK 800
REPL 2
REPL 3
REPL 0
REPL SENDXT
LINK -1

MAKE
@REP 3
COPY 1 F 
@END
COPY M X
COPY M T
@REP 3
COPY 1 F 
@END
REPL O


COPY M X

JUMP MIN

MARK SUB
ADDI T 1 T
TJMP SUB
NOOP ; >:(
VOID M


@REP 21
COPY M F
@END
MARK MIN
COPY M F
COPY M F
COPY M F
SEEK -999
MARK M
COPY M F
TEST MRD
TJMP M
COPY F T
REPL O
SEEK -1
VOID F
SEEK -9999
COPY 0 T

MARK S
REPL RECV
TJMP SUB ; SHUFFLE
COPY F X
COPY F T
REPL O
TEST EOF

MULI T -20 T
SEEK T


JUMP S

MARK SENDHOST
COPY #NERV X
MARK SENDH
HOST M
;CRASH
MARK RECV
DIVI T T M
ADDI T 6 T
MARK W1
ADDI T 1 T
TJMP W1
KILL
HALT



MARK T
REPL SENDHOST

MAKE
HOST F
HOST F
MODE
COPY -600 X
MARK L
ADDI X 100 X
SEEK -9999
TEST M < F
ADDI X T X
TEST M < F
ADDI X T X
TEST X > -1
FJMP L


MODE
REPL SK
WIPE
MARK SK
TEST MRD
TJMP SK
KILL
MULI X #NERV T
FJMP OUT
MARK W
SUBI T #NERV T
TJMP W
MARK OUT
REPL SENDH
NOOP
COPY #NERV M
HALT


MARK O
MODE
LINK 800
REPL 2
REPL 3
REPL SENDXT


MARK 0
LINK -3
REPL 0
REPL 2
REPL SENDXT

MARK 1
LINK -1
REPL 1
REPL 0

REPL SENDXT

MARK 3
LINK 3
REPL 3
REPL 1
REPL SENDXT

MARK 2
LINK 1
REPL 3
REPL 0
REPL 2
MARK SENDXT
FJMP T
COPY X M
COPY T M
